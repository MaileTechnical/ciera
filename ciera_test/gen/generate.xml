<?xml version="1.0" encoding="UTF-8"?>
<project name="ciera_test" default="all" basedir=".">

    <property name="eclipse.home" value="/Users/levi/xtuml/m624.2017-03-30-1540/BridgePoint.app/Contents/Eclipse" />
    <property name="xtumlmc_build" value="${eclipse.home}/tools/mc/bin/xtumlmc_build"/>

    <target name="all" depends="preprocess,cleanse"></target>

    <property name="prebuilder.output" value="code_generation/ciera_test.sql" />
    <property name="sql.input.dir" value="code_generation/xtuml" />
    <property name="sql.input" value="${sql.input.dir}/a.xtuml" />
    <property name="sql.output.dir" value="code_generation" />
    <property name="sql.output" value="${sql.output.dir}/ciera_test.xtuml" />

    <target name="preprocess">
        <mkdir dir="${sql.input.dir}"/>
        <move file="${prebuilder.output}" tofile="${sql.input}"/>
    </target>

    <property name="cleanse.commandline" value="xtumlmc_cleanse_for_BridgePoint -u 500000 ${sql.input.dir} ${sql.output}" />
    <target name="cleanse">
        <echo >Eclipse home: ${eclipse.home}</echo> 
        <echo >${xtumlmc_build} ${cleanse.commandline}</echo> 
        <exec vmlauncher="false" failonerror="true" executable="${xtumlmc_build}" >
            <arg line="${cleanse.commandline}" />
        </exec>
    </target>

</project>
